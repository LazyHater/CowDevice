# CowDevice

Command line tool with autogenerated arguments based on config file

## Installation guide

## 1. Prepare SD card

### Download brand-new raspbian image and unpack it

```
wget https://downloads.raspberrypi.org/raspbian_lite_latest -O raspbian.zip
unzip raspbian.zip
```

### Write image to sdcard

```
dd if=./xxx.img of=/dev/sdX status=progress
```

### Configure ssh and wifi connection

```
# enable ssh
touch /boot/ssh

# configure wifi
# create file /boot/wpa_supplicant.conf and put following content in it

ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=US

network={
     ssid="ssid"
     psk="password"
     key_mgmt=WPA-PSK
}

```

## 2. Setup raspbian

### Update system and required install tools

```
apt-get update && apt-get upgrade -y
apt-get install -y python3-pip git vim
```

### Install bluez dependencies

```
apt-get install -y pkg-config libboost-python-dev libboost-thread-dev libbluetooth-dev libglib2.0-dev python-dev

# fix for building gattlib
ln -s /usr/lib/arm-linux-gnueabihf/libboost_python-py35.so /usr/lib/arm-linux-gnueabihf/libboost_python-py34.so

```

### Increase swap file

```
sed -i 's/CONF_SWAPSIZE=100/CONF_SWAPSIZE=1000/g' /etc/dphys-swapfile
reboot
```

### After reboot clone repo

```
git clone https://github.com/LazyHater/CowDevice.git
```

### Install required python modules

```
cd ./CowDevice
pip3 install -r requirements.txt
```

## 3. Test if tool works

```
# enable bluetooth
echo 'power on' | sudo bluetoothctl

# edit 'MAC' variable in makefile
vim makefile

# write characteristics
make write

# read characteristics
make read
```
